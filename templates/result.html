<!DOCTYPE html>
{% load static %}
<html lang="en" dir="ltr">

<head>
  <script src="https://cdn.anychart.com/releases/8.9.0/js/anychart-core.min.js"></script>
  <script src="https://cdn.anychart.com/releases/8.9.0/js/anychart-radar.min.js"></script>
  <script src="https://cdn.anychart.com/releases/8.9.0/js/anychart-exports.min.js"></script>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script src="https://code.highcharts.com/highcharts.js"></script>
  <script src="https://code.highcharts.com/modules/data.js"></script>
  <script src="https://code.highcharts.com/highcharts-more.js"></script>
  <script src="https://code.highcharts.com/modules/exporting.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/shoelace-css/1.0.0-beta16/shoelace.css">
  <title>Final Results</title>

</head>
<link href="{% static "css/result.css" %}" rel="stylesheet">
<script src="{% static "js/result.js" %}"></script>
<script type="text/javascript" language="javascript">
  function hideall() {
    $('.panel-collapse').each(function () {
      $(this).collapse('hide');
    });
  }
</script>

<body style="background-color: #ddd;">
  <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container-fluid">
      <div class="collapse navbar-collapse" id="myNavbar">
        <ul class="nav navbar-nav navbar-right">
          <li><a href='/'>Home</a></li>
          <li><a href='/users/services/'>Services</a></li>
          <li><a href='/users/questionBank/'>Question Bank</a></li>
          <li><a href='/users/interviewSkill/'>Interview Skills</a></li>
          <li><a href='/users/companyProfile/'>Company Profile</a></li>
          <li><a href='/newstech/'>News</a></li>
          <li class="dropdown">
            <a class="dropdown-toggle" data-toggle="dropdown" href="#">Entry
              <span class="caret"></span>
            </a>
            <ul class="dropdown-menu">
              <li><a href='/users/signUp/'>Sign Up</a></li>
              <li><a href="/users/logout/">Log Out</a></li>
            </ul>
          </li>
          <li><a href='/users/aboutUs/'>About Us</a></li>`
          <li><a href='/users/personalFile/'>Personal Profile</a></li>
        </ul>
      </div>
    </div>
  </nav>
  <div style="display:flex;height: 300px;position: relative;background: white;">
    <img id="logo" src="{% static "img/mocklogo.png" %}" />
    <div style="display: block;  left: 30px;position: relative;top: 50px;">
      <h2>Username:Daniel Chen</h2>
      <br><br>
      <h2>Selected Job:{{job_name}}</h2>
    </div>
    <div id="container"
      style="top: -40px; position: relative; min-width: 310px; height: 400px; max-width: 600px; margin: 0 auto;left: -44px;">
    </div>
  </div>
  <ul class="quesmenu">
    <button class="quesnum" class="btn btn-primary" id="btn" onclick="hideall()" data-toggle="collapse" href="#result1"
      data-target="#result1">1.</button>
    <button class="quesnum" class="btn btn-primary" id="btn" onclick="hideall()" data-toggle="collapse" href="#result2"
      data-target="#result2">2.</button>
    <button class="quesnum" class="btn btn-primary" id="btn" onclick="hideall()" data-toggle="collapse" href="#result3"
      data-target="#result3">3.</button>
    <button class="quesnum" class="btn btn-primary" id="btn" onclick="hideall()" data-toggle="collapse" href="#result4"
      data-target="#result4">4.</button>
    <button class="quesnum" class="btn btn-primary" id="btn" onclick="hideall()" data-toggle="collapse" href="#result5"
      data-target="#result5">5.</button>
    <button class="quesnum" class="btn btn-primary" id="btn" onclick="hideall()" data-toggle="collapse" href="#result6"
      data-target="#result6">6.</button>
    <button class="quesnum" class="btn btn-primary" id="btn" onclick="hideall()" data-toggle="collapse" href="#result7"
      data-target="#result7">7.</button>
    <button class="quesnum" class="btn btn-primary" id="btn" onclick="hideall()" data-toggle="collapse" href="#result8"
      data-target="#result8">8.</button>
    <button class="quesnum" class="btn btn-primary" id="btn" onclick="hideall()" data-toggle="collapse" href="#result9"
      data-target="#result9">9.</button>
    <button class="quesnum" class="btn btn-primary" id="btn" onclick="hideall()" data-toggle="collapse" href="#result10"
      data-target="#result10">10.</button>
  </ul>

  <div id="result1" class="panel-collapse collapse" style="position: relative;margin: auto; width: 70%;left: -10%;">
    <div class="num">1.
    </div>
    <div class="ques">{{ques1}}</div>
    <div class="result">
      <label for="reply1">Your reply</label>
      <textarea readonly class="reply" name="reply1" cols="10" rows="10">{{reply1}}</textarea>
      <label for="ans1">Reference answer</label>
      <textarea readonly class="ans" name="reply1" cols="10" rows="10">{{answer1}}</textarea>
      <div class="chart-container" style=" display:flex; position: relative; height:150px; width:250px">
        <canvas id="key1"></canvas>
        <canvas id="semantic1"></canvas>
      </div>
      <div class="emochart" id="emo1"></div>
      <!-- <div class="nlpchart">
        <img src="data:image/png;base64,{{final_bar1|safe}}" style="width: 230px;height: 190px;">
      </div>
      <div class="nlpchart">
        <img src="data:image/png;base64,{{keywords_bar1|safe}}" style="width: 230px;height: 190px;">
      </div>
      <img id="emochart" src="data:image/png;base64,{{emo_bar1|safe}}" style="width: 350px;height: 250px;"> -->

      <div class="comment">
        <h3 style="font-weight: bold;">Comments & Suggestions:</h3><br>
        {{BlinkComment_1}} You've answered the question spendidly and keyword use is on point! Well done!
        However, you seem a little bit nervous. Try to relax and smile more :)))
      </div>
    </div>
  </div>

  <script>
    var semContext1 = document.getElementById("semantic1").getContext("2d");
    var semData1 = {
      //  labels:[
      //    'Percentage'
      //  ],
      datasets: [{
        label: "Answer Fitness",
        data: [{{bert_list.0}}],
        backgroundColor: ["#53bda5"],
        hoverBackgroundColor: ["#388271"]
      }]
     };

    var semConfig1 = {
      type: 'horizontalBar',
      data: semData1,
      options: {
        maintainAspecrRatio: false,
        responsive: true,
        animation: {
					duration: 5000,
					easing: 'linear'
				},
        scales: {
          xAxes: [{
            ticks: {
              min: 0,
              max: 100
            }
          }],
          yAxes: [{
            stacked: true
          }]
        }
      }
    }
    var semChart1 = new Chart(semContext1,semConfig1);

    (function(){ // self calling function replaces document.ready()
    //adding event listenr to button
    document.querySelector('#btn').addEventListener('click',function(){
      semChart1.destroy();
      semChart1 = new Chart(semContext1, semConfig1);
    });
    })();

    var keyContext1 = document.getElementById("key1").getContext("2d");
    var keyData1 = {
      //  labels:[
      //    'Percentage'
      //  ],
      datasets: [{
        label: "Keyword Accuracy",
        data: [{{keyscore_list.0}}],
        backgroundColor: ["#36754f"],
        hoverBackgroundColor: ["#388271"]
      }]
     };

    var KeyChart1 = new Chart(keyContext1, {
      type: 'horizontalBar',
      data: keyData1,
      options: {
        animation: {
					duration: 5000,
					easing: 'linear'
				},
        maintainAspecrRatio: false,
        responsive: true,
        scales: {
          xAxes: [{
            ticks: {
              beginAtZero: true,
              max: 100
            }
          }],
          yAxes: [{
            stacked: true
          }]
        }

      }
    });

    var max1 = Math.ceil10(Math.max({{emotion_dict.n1}}, {{emotion_dict.h1}}, {{emotion_dict.a1}}, {{emotion_dict.f1}}, {{emotion_dict.s1}}) +10, 1)
    anychart.onDocumentReady(function () {
      var emoData1 = [
        { x: "neutral", value: {{emotion_dict.n1}}},
        { x: "Happy", value: {{emotion_dict.h1}}},
        { x: "Angry", value: {{emotion_dict.a1}}},
        { x: "Fear", value: {{emotion_dict.f1}}},
        { x: "Sad", value: {{emotion_dict.s1}}}
      ];

      var chart = anychart.radar();
      var animationSettings = chart.animation();
      animationSettings.duration(3000);
      animationSettings.enabled(true);
      chart.yScale()
        .minimum(0)
        .maximum(max1)
        .ticks({ 'interval': 10 });

      chart.yGrid().palette(["gray 0.1", "gray 0.2"]);

      chart.line(emoData1)
      chart.area(emoData1).name('Percantage').markers(true).fill("rgb(100, 181, 246)", 0.3).stroke("rgb(100, 181, 246)")
      chart.title("Emotion Radar Plot")
      // .legend(true);

      chart.container('emo1');
      chart.draw();
     });
  </script>

  <div id="result2" class="panel-collapse collapse" style="position: relative;margin: auto;">
    <div class="num">2.</div>
    <div class="ques">{{ques2}}</div>
    <div class="result">
      <label for="reply2">Your reply</label>
      <textarea readonly class="reply" name="reply2" cols="10" rows="10">{{reply2}}</textarea>
      <label for="ans2">Reference answer</label>
      <textarea readonly class="ans" name="reply2" cols="10" rows="10">{{answer2}}</textarea>
      <div class="chart-container" style=" display:flex; position: relative; height:200px; width:250px">
        <canvas id="key2"></canvas>
        <canvas id="semantic2"></canvas>
      </div>
      <div class="emochart" id="emo2"></div>
      <div class="comment">
        <h3 style="font-weight: bold;">Comments & Suggestions:</h3><br>
        {{BlinkComment_2}}It seems that you missed the point of this question. Please try to construct your questions
        before you answer.
        Great job on your overall attitude though! Keep it up!
      </div>
    </div>
  </div>

  <script>
    var SemanticContext2 = document.getElementById("semantic2").getContext("2d");
    var SemanticData2 = {
      // labels:[
      //   'Percentage'
      // ],
      datasets: [{
        label: "Answer Fitness",
        data: [{{bert_list.1}}],
        backgroundColor: ["#53bda5"],
        hoverBackgroundColor: ["#388271"]
      }]
    };

    var SemanticChart2 = new Chart(SemanticContext2, {
      type: 'horizontalBar',
      data: SemanticData2,
      options: {
        maintainAspecrRatio: false,
        responsive: true,
        scales: {
          xAxes: [{
            ticks: {
              min: 0,
              max: 100
            }
          }],
          yAxes: [{
            stacked: true
          }]
        }

      }
    });

    var keyContext2 = document.getElementById("key2").getContext("2d");
    var keyData2 = {
      // labels:[
      //   'Percentage'
      // ],
      datasets: [{
        label: "Keyword Accuracy",
        data: [{{keyscore_list.1}}],
        backgroundColor: ["#53bda5"],
        hoverBackgroundColor: ["#388271"]
      }]
    };

    var KeyChart2 = new Chart(keyContext2, {
      type: 'horizontalBar',
      data: keyData2,
      options: {
        maintainAspecrRatio: false,
        responsive: true,
        scales: {
          xAxes: [{
            ticks: {
              beginAtZero: true,
              max: 100
            }
          }],
          yAxes: [{
            stacked: true
          }]
        }

      }
    });

    var max2 = Math.ceil10(Math.max({{emotion_dict.n2}}, {{emotion_dict.h2}}, {{emotion_dict.a2}}, {{emotion_dict.f2}}, {{emotion_dict.s2}}) +10, 1)
    anychart.onDocumentReady(function () {
      var emoData2 = [
        { x: "neutral", value: {{emotion_dict.n2}}},
        { x: "Happy", value: {{emotion_dict.h2}}},
        { x: "Angry", value: {{emotion_dict.a2}}},
        { x: "Fear", value: {{emotion_dict.f2}}},
        { x: "Sad", value: {{emotion_dict.s2}}}
      ];

      var chart = anychart.radar();

      chart.yScale()
        .minimum(0)
        .maximum(max2)
        .ticks({ 'interval': 10 });

      chart.yGrid().palette(["gray 0.1", "gray 0.2"]);

      chart.line(emoData2)
      chart.area(emoData2).name('Percantage').markers(true).fill("rgb(100, 181, 246)", 0.3).stroke("rgb(100, 181, 246)")
      chart.title("Emotion Radar Plot")
      // .legend(true);

      chart.container('emo2');
      chart.draw();
    })
  </script>

  <div id="result3" class="panel-collapse collapse" style="position: relative;margin: auto;">
    <div class="num">3.</div>
    <div class="ques">{{ques3}}</div>
    <div class="result">
      <label for="reply3">Your reply</label>
      <textarea readonly class="reply" name="reply3" cols="10" rows="10">{{reply3}}</textarea>
      <label for="ans3">Reference answer</label>
      <textarea readonly class="ans" name="reply3" cols="10" rows="10">{{answer3}}</textarea>
      <div class="chart-container" style=" display:flex; position: relative; height:200px; width:250px">
        <canvas id="key3"></canvas>
        <canvas id="semantic3"></canvas>
      </div>
      <div class="emochart" id="emo3"></div>
      <div class="comment">
        <h3 style="font-weight: bold;">Comments & Suggestions:</h3><br>
        {{BlinkComment_3}}You've answered the question spendidly. However word choices needs some improvement.
        You were too nervous! Please try to relax and take it easy!
      </div>
    </div>
  </div>

  <script>
    var SemanticContext3 = document.getElementById("semantic3").getContext("2d");
    var SemanticData3 = {
      //  labels:[
      //    'Percentage'
      //  ],
      datasets: [{
        label: "Answer Fitness",
        data: [{{bert_list.2}}],
        backgroundColor: ["#53bda5"],
        hoverBackgroundColor: ["#388271"]
      }]
     };

    var SemanticChart3 = new Chart(SemanticContext3, {
      type: 'horizontalBar',
      data: SemanticData3,
      options: {
        maintainAspecrRatio: false,
        responsive: true,
        scales: {
          xAxes: [{
            ticks: {
              min: 0,
              max: 100
            }
          }],
          yAxes: [{
            stacked: true
          }]
        }

      }
    });

    var keyContext3 = document.getElementById("key3").getContext("2d");
    var keyData3 = {
      //  labels:[
      //    'Percentage'
      //  ],
      datasets: [{
        label: "Keyword Accuracy",
        data: [{{keyscore_list.2}}],
        backgroundColor: ["#53bda5"],
        hoverBackgroundColor: ["#388271"]
      }]
     };

    var KeyChart3 = new Chart(keyContext3, {
      type: 'horizontalBar',
      data: keyData3,
      options: {
        maintainAspecrRatio: false,
        responsive: true,
        scales: {
          xAxes: [{
            ticks: {
              beginAtZero: true,
              max: 100
            }
          }],
          yAxes: [{
            stacked: true
          }]
        }

      }
    });

    var max3 = Math.ceil10(Math.max({{emotion_dict.n3}}, {{emotion_dict.h3}}, {{emotion_dict.a3}}, {{emotion_dict.f3}}, {{emotion_dict.s3}}) +10, 1)
    anychart.onDocumentReady(function () {
      var emoData3 = [
        { x: "neutral", value: {{emotion_dict.n3}}},
        { x: "Happy", value: {{emotion_dict.h3}}},
        { x: "Angry", value: {{emotion_dict.a3}}},
        { x: "Fear", value: {{emotion_dict.f3}}},
        { x: "Sad", value: {{emotion_dict.s3}}}
      ];

      var chart = anychart.radar();

      chart.yScale()
        .minimum(0)
        .maximum(max3)
        .ticks({ 'interval': 10 });

      chart.yGrid().palette(["gray 0.1", "gray 0.2"]);

      chart.line(emoData3)
      chart.area(emoData3).name('Percantage').markers(true).fill("rgb(100, 181, 246)", 0.3).stroke("rgb(100, 181, 246)")
      chart.title("Emotion Radar Plot")
      // .legend(true);

      chart.container('emo3');
      chart.draw();
    })
  </script>

<div id="result4" class="panel-collapse collapse" style="position: relative;margin: auto;">
  <div class="num">4.
  </div>
  <div class="ques">{{ques4}}</div>
  <div class="result">
    <label for="reply4">Your reply</label>
    <textarea readonly class="reply" name="reply4" cols="10" rows="10">{{reply1}}</textarea>
    <label for="ans4">Reference answer</label>
    <textarea readonly class="ans" name="reply4" cols="10" rows="10">{{answer1}}</textarea>
    <div class="chart-container" style=" display:flex; position: relative; height:200px; width:250px">
      <canvas id="key4"></canvas>
      <canvas id="semantic4"></canvas>
    </div>
    <div class="emochart" id="emo4"></div>
    <div class="comment">
      <h3 style="font-weight: bold;">Comments & Suggestions:</h3><br>
      {{BlinkComment_4}} You've answered the question spendidly and keyword use is on point! Well done!
      However, you seem a little bit nervous. Try to relax and smile more :)))
    </div>
  </div>
</div>

<script>
  var SemanticContext4 = document.getElementById("semantic4").getContext("2d");
  var SemanticData4 = {
    //  labels:[
    //    'Percentage'
    //  ],
    datasets: [{
      label: "Answer Fitness",
      data: [{{bert_list.0}}],
      backgroundColor: ["#53bda5"],
      hoverBackgroundColor: ["#388271"]
    }]
   };

  var SemanticChart4 = new Chart(SemanticContext4, {
    type: 'horizontalBar',
    data: SemanticData4,
    options: {
      maintainAspecrRatio: false,
      responsive: true,
      scales: {
        xAxes: [{
          ticks: {
            min: 0,
            max: 100
          }
        }],
        yAxes: [{
          stacked: true
        }]
      }

    }
  });

  var keyContext4 = document.getElementById("key4").getContext("2d");
  var keyData4 = {
    //  labels:[
    //    'Percentage'
    //  ],
    datasets: [{
      label: "Keyword Accuracy",
      data: [{{keyscore_list.3}}],
      backgroundColor: ["#53bda5"],
      hoverBackgroundColor: ["#388271"]
    }]
   };

  var KeyChart4 = new Chart(keyContext4, {
    type: 'horizontalBar',
    data: keyData4,
    options: {
      maintainAspecrRatio: false,
      responsive: true,
      scales: {
        xAxes: [{
          ticks: {
            beginAtZero: true,
            max: 100
          }
        }],
        yAxes: [{
          stacked: true
        }]
      }

    }
  });

  var max4 = Math.ceil10(Math.max({{emotion_dict.n4}}, {{emotion_dict.h4}}, {{emotion_dict.a4}}, {{emotion_dict.f4}}, {{emotion_dict.s4}}) +10, 1)
  anychart.onDocumentReady(function () {
    var emoData4 = [
      { x: "neutral", value: {{emotion_dict.n4}}},
      { x: "Happy", value: {{emotion_dict.h4}}},
      { x: "Angry", value: {{emotion_dict.a4}}},
      { x: "Fear", value: {{emotion_dict.f4}}},
      { x: "Sad", value: {{emotion_dict.s4}}}
    ];

    var chart = anychart.radar();

    chart.yScale()
      .minimum(0)
      .maximum(max1)
      .ticks({ 'interval': 10 });

    chart.yGrid().palette(["gray 0.1", "gray 0.2"]);

    chart.line(emoData4)
    chart.area(emoData4).name('Percantage').markers(true).fill("rgb(100, 181, 246)", 0.3).stroke("rgb(100, 181, 246)")
    chart.title("Emotion Radar Plot")
    // .legend(true);

    chart.container('emo4');
    chart.draw();
 })
</script>
</body>
<script>
  $(function () {
    var chart = new Highcharts.Chart({
      chart: {
        renderTo: 'container',
        plotBackgroundColor: null,
        plotBackgroundImage: null,
        plotBorderWidth: 0,
        plotShadow: false,
        renderTo: 'container'
      },
      title: {
        text: 'OVERALL PERFORMANCE',
        align: 'center',
        verticalAlign: 'top',
        y: 120
      },
      // tooltip: {
      //     pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
      // },
      pane: {
        center: ['50%', '75%'],
        size: '50%',
        startAngle: -90,
        endAngle: 90,
        background: {
          borderWidth: 0,
          backgroundColor: 'none',
          innerRadius: '60%',
          outerRadius: '100%',
          shape: 'arc'
        }
      },
      yAxis: [{
        lineWidth: 0,
        min: 0,
        max: 90,
        minorTickLength: 0,
        tickLength: 0,
        tickWidth: 0,
        labels: {
          enabled: false
        },
        title: {
          text: '', //'<div class="gaugeFooter">46% Rate</div>',
          useHTML: true,
          y: 80
        },
        pane: 0,

      }],
      plotOptions: {
        pie: {
          dataLabels: {
            enabled: true,
            distance: -50,
            style: {
              fontWeight: 'bold',
              color: 'white',
              textShadow: '0px 1px 2px black'
            }
          },
          startAngle: -90,
          endAngle: 90,
          center: ['50%', '75%']
        },
        gauge: {
          dataLabels: {
            enabled: false
          },
          dial: {
            radius: '100%'
          }
        }
      },

      series: [{
        type: 'pie',
        name: 'Your performance',
        innerSize: '40%',
        data: [
          ['POOR', 25],
          ['FAIR', 25],
          ['GOOD', 25],
          ['EXCELLENT', 25]
        ]
      }, {
        type: 'gauge',
        data: [{{fuel_degree}}],
        dial: {
          rearLength: 0
        }
      }],
    });
  });
</script>

</html>